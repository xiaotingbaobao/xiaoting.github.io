(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-myinfomation-myinfomation"],{"47ea":function(t,i,a){"use strict";var e={pageHeadBack:a("9c7e").default},n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",[a("page-head-back",{attrs:{title:"个人信息"}}),a("v-uni-view",{staticClass:"toptop"},[a("v-uni-view",{staticClass:"topmargin"},[a("v-uni-view",{staticClass:"myimg"},[a("v-uni-view",{staticClass:"myimg_left"},[t._v("头像")]),a("v-uni-view",{staticClass:"myimg_right"},[a("v-uni-view",{staticClass:"myimg_rightimg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseImage.apply(void 0,arguments)}}},[t.imageSrc?[a("v-uni-image",{staticClass:"image",attrs:{"lazy-load":!0,src:t.imageSrc,mode:"aspectFill"}})]:[a("v-uni-view",{staticClass:"uni-hello-addfile"})]],2),a("v-uni-view",{staticClass:"iconfont iconright"})],1)],1),a("v-uni-view",{staticClass:"topmy",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeName.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"my_left"},[t._v("姓名")]),a("v-uni-view",{staticClass:"my_right"},[a("v-uni-view",{staticClass:"my_rightimg"},[t._v(t._s(t.name))]),a("v-uni-view",{staticClass:"iconfont iconright"})],1)],1),a("v-uni-view",{staticClass:"topmy",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getyaoqingma.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"my_left"},[t._v("手机号码：")]),a("v-uni-view",{staticClass:"my_right"},[a("v-uni-view",{staticClass:"my_rightimg"},[t._v(t._s(t.usermobile))])],1)],1),a("v-uni-view",{staticClass:"topmy",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changePassword.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"my_left"},[t._v("修改密码")]),a("v-uni-view",{staticClass:"my_right"},[a("v-uni-view",{staticClass:"my_rightimg"}),a("v-uni-view",{staticClass:"iconfont iconright"})],1)],1),a("v-uni-view",{staticClass:"topmy",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tomycompanylist.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"my_left"},[t._v("我的公司")]),a("v-uni-view",{staticClass:"my_right"},[a("v-uni-view",{staticClass:"my_rightimg"}),a("v-uni-view",{staticClass:"iconfont iconright"})],1)],1)],1)],1),a("v-uni-view",{staticClass:"addcompany"},[a("v-uni-view",{staticClass:"addmargin",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.joinCompany.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"my_left"},[t._v("加入公司")]),a("v-uni-view",{staticClass:"my_right"},[a("v-uni-view",{staticClass:"iconfont iconright"})],1)],1)],1),t.issupplierid?t._e():a("v-uni-view",{staticClass:"addcompany"},[a("v-uni-view",{staticClass:"addmargin",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addCompany.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"my_left"},[t._v("创建公司")]),a("v-uni-view",{staticClass:"my_right"},[a("v-uni-view",{staticClass:"iconfont iconright"})],1)],1)],1),a("v-uni-view",{staticClass:"addcompany"},[a("v-uni-view",{staticClass:"addmargin",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.loginout.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"my_left"},[t._v("注销登录")]),a("v-uni-view",{staticClass:"my_right"},[a("v-uni-view",{staticClass:"iconfont iconright"})],1)],1)],1)],1)},o=[];a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return o})),a.d(i,"a",(function(){return e}))},"49a9":function(t,i,a){"use strict";a.r(i);var e=a("47ea"),n=a("e45e");for(var o in n)"default"!==o&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("cd41");var s,c=a("f0c5"),r=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"50865999",null,!1,e["a"],s);i["default"]=r.exports},"4f16":function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,"@-webkit-keyframes grace-fade-data-v-38501214{0%{opacity:.9}25%{opacity:1}50%{opacity:.9}75%{opacity:1}100%{opacity:1}}@keyframes grace-fade-data-v-38501214{0%{opacity:.9}25%{opacity:1}50%{opacity:.9}75%{opacity:1}100%{opacity:1}}.grace-full-loading .content[data-v-38501214]{width:%?300?%;height:auto;position:absolute;z-index:100;left:50%;top:40%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-animation:grace-fade-data-v-38501214 3.5s infinite linear;animation:grace-fade-data-v-38501214 3.5s infinite linear;opacity:.9;padding:%?10?%}.grace-full-loading .image[data-v-38501214]{width:%?150?%;height:%?150?%;margin:0 auto}.grace-full-loading .image uni-image[data-v-38501214]{width:%?150?%;height:%?150?%;border-radius:50%}.grace-full-loading .text[data-v-38501214]{line-height:1.5em;font-size:%?22?%;margin-top:6px;text-align:center}\r\n\r\n/* .grace-full-loading{width:100%; height:100%; background:#FFFFFF; z-index:99;}\r\n.grace-full-loading .content{width:300rpx; height:auto;  z-index:100;  transform:translate(-50%, -50%); animation:grace-fade 3500ms infinite linear; opacity:0.6; padding:10rpx;}\r\n.grace-full-loading .image{width:150rpx; height:150rpx; margin:0 auto;}\r\n.grace-full-loading .image image{width:150rpx; height:150rpx; border-radius:150rpx;}\r\n.grace-full-loading .text{line-height:1.5em; font-size:22upx; margin-top:6px; font-style:italic; text-align:center;} */",""]),t.exports=i},"5be3":function(t,i,a){"use strict";var e,n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return t.graceFullLoading?a("v-uni-view",{staticClass:"grace-full-loading",on:{touchmove:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.stopFun.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.stopFun.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"image"},[a("v-uni-image",{attrs:{src:t.logoUrl,mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"text"},[t._v(t._s(t.text))])],1)],1):t._e()},o=[];a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return o})),a.d(i,"a",(function(){return e}))},6968:function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-50865999]{background-color:#f0f0f0}.toptop[data-v-50865999]{width:100%;background-color:#fff}.toptop .topmargin[data-v-50865999]{margin:0 %?30?%;width:%?690?%}.toptop .topmargin .myimg[data-v-50865999]{width:100%;height:%?171?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-bottom:1px solid #f1f1f1}.toptop .topmargin .myimg .myimg_left[data-v-50865999]{font-size:%?30?%;color:#333;padding-top:%?30?%;padding-bottom:%?21?%;line-height:%?120?%;font-weight:700}.toptop .topmargin .myimg .myimg_right[data-v-50865999]{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:%?30?%;margin-bottom:%?21?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.toptop .topmargin .myimg .myimg_right .myimg_rightimg[data-v-50865999]{width:%?120?%;border-radius:%?10?%;overflow:hidden;height:%?120?%;margin-right:%?6?%}.toptop .topmargin .myimg .myimg_right .myimg_rightimg uni-image[data-v-50865999]{width:100%;height:100%}.toptop .topmargin .myimg .myimg_right .iconfont[data-v-50865999]{color:#666;font-size:%?32?%}.toptop .topmargin .topmy[data-v-50865999]{width:100%;height:%?88?%;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-bottom:1px solid #f1f1f1}.toptop .topmargin .topmy .my_left[data-v-50865999]{font-size:%?30?%;color:#333;font-weight:700}.toptop .topmargin .topmy .my_right[data-v-50865999]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.toptop .topmargin .topmy .my_right .my_rightimg[data-v-50865999]{font-size:%?30?%;color:#666;border-radius:%?10?%;margin-right:%?6?%}.toptop .topmargin .topmy .my_right .my_rightimg .iconfont[data-v-50865999]{font-size:%?46?%;color:#666}.toptop .topmargin .topmy .my_right .iconfont[data-v-50865999]{color:#666;font-size:%?32?%}.addcompany[data-v-50865999]{width:100%;background-color:#fff;margin-top:%?20?%;height:%?88?%}.addcompany .addmargin[data-v-50865999]{margin:0 %?30?%;width:%?690?%;height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.addcompany .addmargin .my_left[data-v-50865999]{font-size:%?30?%;color:#333;font-weight:700}.addcompany .addmargin .my_right .iconfont[data-v-50865999]{color:#666;font-size:%?32?%}body.?%PAGE?%[data-v-50865999]{background-color:#f0f0f0}',""]),t.exports=i},"6ab6":function(t,i,a){"use strict";a.r(i);var e=a("99ab"),n=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},"99ab":function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={name:"graceFullLoading",props:{graceFullLoading:{type:Boolean,default:!1},logoUrl:{type:String,default:""},text:{type:String,default:"Loading ..."}},methods:{stopFun:function(){return!1}}};i.default=e},"9fee":function(t,i,a){"use strict";a.r(i);var e=a("5be3"),n=a("6ab6");for(var o in n)"default"!==o&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("c258");var s,c=a("f0c5"),r=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"38501214",null,!1,e["a"],s);i["default"]=r.exports},c258:function(t,i,a){"use strict";var e=a("eed4"),n=a.n(e);n.a},cd41:function(t,i,a){"use strict";var e=a("d54c"),n=a.n(e);n.a},d36f:function(t,i,a){"use strict";var e=a("ee27");a("ac1f"),a("1276"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o=e(a("9c7e")),s=e(a("9fee")),c={components:{pageHeadBack:o.default,graceFullLoading:s.default},data:function(){return{graceFullLoading:!0,imageSrc:"",tmplist:[],newavatar:"",name:"",usermobile:"",roletext:"",issupplierid:!1}},onLoad:function(){n=this,n.getuser((function(t){console.log(t),n.userinfo=t.data,n.usermobile=n.userinfo.mobile}))},onShow:function(){n.getInformation()},methods:{getyaoqingma:function(){n.post("api/payment/generate_invitation_code",{level:"11"},(function(t){if(console.log(t),1===t.code)console.log("调用成功"+t.data.codeInfo.code);else{var i=t.msg.split("(",2);n.echo(i[0])}}))},joinCompany:function(){uni.navigateTo({url:"/pages/my/myinfomation/joincompany/joincompany"})},addCompany:function(){uni.navigateTo({url:"/pages/my/myinfomation/addcompany/addcompany"})},changePassword:function(){uni.navigateTo({url:"/pages/my/myinfomation/changepassword/changepassword?moblie="+n.usermobile})},tomycompanylist:function(){uni.navigateTo({url:"/pages/my/myinfomation/mycompanylist/mycompanylist"})},changeName:function(){uni.navigateTo({url:"/pages/my/myinfomation/changename/changename"})},loginout:function(){n.post("api/user/logout",{},(function(t){if(console.log(t),1===t.code)n.echo("注销成功"),setTimeout((function(){uni.reLaunch({url:"/pages/login/login"})}),500);else{var i=t.msg.split("(",2);n.echo(i[0])}}))},getInformation:function(){n.post("api/user/index",{},(function(t){if(console.log(t),1===t.code)n.tmplist=t.data.userinfo,n.name=n.tmplist.nickname,n.roletext=t.data.userinfo.userinfo.role,n.getsupplierrole(),n.tmplist.avatar?n.imageSrc=n.tmplist.avatar:n.imageSrc="/static/img/nan.png",n.graceFullLoading=!1;else{var i=t.msg.split("(",2);n.echo(i[0])}}))},getsupplierrole:function(){n.post("api/staff/supplier_list",{user_id:n.tmplist.userinfo.user_id},(function(t){1===t.code&&(0==t.data.length?n.$set(n,"issupplierid",!1):(n.$set(n,"issupplierid",!0),console.log("我是供应商~我不能新建公司")))}))},changeImage:function(){console.log(n.tmplist),n.tmplist.role=n.roletext,n.post("api/user/profile",n.tmplist,(function(t){if(console.log(t),1===t.code)n.echo("修改成功"),uni.setStorage({key:"update_my",data:!0}),uni.setStorage({key:"update_mana",data:!0}),n.updateuser();else{var i=t.msg.split("(",2);n.echo(i[0])}}))},chooseImage:function(){uni.chooseImage({count:1,sizeType:["compressed"],success:function(t){var i=t.tempFilePaths[0];n.imgCompress(i,300,(function(t){uni.uploadFile({url:n.config.host+"api/common/upload?token="+n.userinfo.token,filePath:t,fileType:"image",name:"file",formData:{},success:function(t){var i;console.log("uploadImage success, res is:",t),i=t.data;var a=JSON.parse(i);n.tmplist.avatar=n.config.host+a.data.url,n.changeImage(),uni.showToast({title:"上传成功",icon:"success",duration:1e3}),n.imageSrc=n.config.host+a.data.url},fail:function(t){console.log("uploadImage fail",t),uni.showModal({content:t.errMsg,showCancel:!1})}})}))},fail:function(t){console.log("chooseImage fail",t)}})}}};i.default=c},d54c:function(t,i,a){var e=a("6968");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("e146f90a",e,!0,{sourceMap:!1,shadowMode:!1})},e45e:function(t,i,a){"use strict";a.r(i);var e=a("d36f"),n=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},eed4:function(t,i,a){var e=a("4f16");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("4ae281b9",e,!0,{sourceMap:!1,shadowMode:!1})}}]);