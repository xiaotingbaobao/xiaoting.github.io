(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-myinfomation-mydetail-changemydetail-changemydetail"],{"2c99":function(e,t,i){"use strict";i.r(t);var n=i("6063"),a=i("327b");for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("6529");var c,s=i("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"2ab5deac",null,!1,n["a"],c);t["default"]=r.exports},"327b":function(e,t,i){"use strict";i.r(t);var n=i("d080"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},6063:function(e,t,i){"use strict";var n={pageHeadGit:i("ed78").default,yuDatetimePicker:i("b5bc").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("page-head-git",{attrs:{title:"个人信息修改"},on:{back:function(t){arguments[0]=t=e.$handleEvent(t),e.backfee.apply(void 0,arguments)},send:function(t){arguments[0]=t=e.$handleEvent(t),e.deletefee.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"header"},[i("v-uni-view",{staticClass:"header_z"},[i("v-uni-view",{staticClass:"name"},[e._v("我的头像")])],1),i("v-uni-view",{staticClass:"header_y"},[i("v-uni-view",{staticClass:"header_photo",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage.apply(void 0,arguments)}}},[e.imageSrc?[i("v-uni-image",{staticClass:"image",attrs:{"lazy-load":!0,src:e.imageSrc,mode:"aspectFill"}})]:[i("v-uni-view",{staticClass:"uni-hello-addfile"})]],2),i("v-uni-view",{staticClass:"iconfont iconarrow-y"})],1)],1),i("v-uni-view",{staticClass:"xpadding"}),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"content_list"},[i("v-uni-view",{staticClass:"list_text"},[e._v("姓"),i("v-uni-text",{staticClass:"www"}),e._v("名 :")],1),i("v-uni-view",{staticClass:"list_content"},[i("v-uni-view",[i("v-uni-input",{attrs:{maxlength:"6","placeholder-class":"placeholderClass"},model:{value:e.tmp.nickname,callback:function(t){e.$set(e.tmp,"nickname",t)},expression:"tmp.nickname"}})],1),i("v-uni-view",{staticClass:"iconfont iconarrow-y"})],1)],1),""!==e.datetimemargintwo?i("v-uni-view",{staticClass:"con_onec_foo"},[i("v-uni-view",{staticClass:"con_onecon_title"},[e._v("生"),i("v-uni-text",{staticClass:"www"}),e._v("日：")],1),i("v-uni-view",{staticClass:"con_onecon_input"},[i("v-uni-view",{staticClass:"text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleTab2()}}},[e._v(e._s(e.sextext))]),i("yu-datetime-picker",{ref:"dateTime2",attrs:{value:e.datetimemargintwo,startYear:"1960",isAll:!0,current:!0},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm2.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"iconfont icondown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleTab2()}}})],1)],1):e._e(),e.datetimemargintwo?e._e():i("v-uni-view",{staticClass:"con_onec_foo"},[i("v-uni-view",{staticClass:"con_onecon_title"},[e._v("生"),i("v-uni-text",{staticClass:"www"}),e._v("日：")],1),i("v-uni-view",{staticClass:"con_onecon_input"},[i("v-uni-view",{staticClass:"text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleTab2()}}},[e._v(e._s(e.sextext))]),i("yu-datetime-picker",{ref:"dateTime2",attrs:{value:"1980-10-10 08:30:30",startYear:"1960",isAll:!0,current:!0},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm2.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"iconfont icondown",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleTab2()}}})],1)],1),i("v-uni-view",{staticClass:"email"},[i("v-uni-view",{staticClass:"email_l"},[e._v("性"),i("v-uni-text",{staticClass:"www"}),e._v("别：")],1),i("v-uni-view",{staticClass:"email_r"},[i("v-uni-view",{staticClass:"pickers"},[i("v-uni-picker",{attrs:{value:e.gender,range:e.genderlist},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindgenderChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-input"},[e._v(e._s(e.gendertext))])],1)],1),i("v-uni-view",{staticClass:"iconfont icondown"})],1)],1),i("v-uni-view",{staticClass:"content_list"},[i("v-uni-view",{staticClass:"list_text"},[e._v("员工邮箱:")]),i("v-uni-view",{staticClass:"list_content"},[i("v-uni-view",[i("v-uni-input",{model:{value:e.tmp.email,callback:function(t){e.$set(e.tmp,"email",t)},expression:"tmp.email"}})],1),i("v-uni-view",{staticClass:"iconfont iconright"})],1)],1),i("v-uni-view",{staticClass:"content_list"},[i("v-uni-view",{staticClass:"list_text"},[e._v("证件号码 :")]),i("v-uni-view",{staticClass:"list_content"},[i("v-uni-view",[i("v-uni-input",{model:{value:e.tmp.idnumber,callback:function(t){e.$set(e.tmp,"idnumber",t)},expression:"tmp.idnumber"}})],1),i("v-uni-view",{staticClass:"iconfont iconright"})],1)],1),i("v-uni-view",{staticClass:"content_list"},[i("v-uni-view",{staticClass:"list_text",staticStyle:{width:"180upx"}},[e._v("家庭住址 :")]),i("v-uni-view",{staticClass:"list_content",staticStyle:{width:"500upx"}},[i("v-uni-view",[i("v-uni-input",{staticStyle:{width:"460upx"},model:{value:e.tmp.address,callback:function(t){e.$set(e.tmp,"address",t)},expression:"tmp.address"}})],1),i("v-uni-view",{staticClass:"iconfont iconright"})],1)],1)],1)],1)},o=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}))},6529:function(e,t,i){"use strict";var n=i("7171"),a=i.n(n);a.a},7171:function(e,t,i){var n=i("7548");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("698ed299",n,!0,{sourceMap:!1,shadowMode:!1})},7548:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-2ab5deac]{background-color:#f5f5f5}.header[data-v-2ab5deac]{width:%?690?%;padding:0 %?30?%;height:%?149?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff}.header .header_z[data-v-2ab5deac]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.header .header_z .name[data-v-2ab5deac]{font-size:%?32?%;font-weight:500;color:#333}.header .header_z .line[data-v-2ab5deac]{width:%?2?%;height:%?30?%;background:#333;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;margin-left:%?14?%}.header .header_z .alias[data-v-2ab5deac]{font-size:%?24?%;color:#666;margin-left:%?14?%}.header .header_y[data-v-2ab5deac]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.header .header_y .header_photo[data-v-2ab5deac]{width:%?98?%;height:%?98?%;overflow:hidden;border-radius:50%;margin-right:%?10?%}.header .header_y .header_photo .image[data-v-2ab5deac]{width:%?98?%;height:%?98?%}.content[data-v-2ab5deac]{width:100%;background-color:#fff}.content .con_onec_foo[data-v-2ab5deac]{width:calc(100% - %?60?%);margin:0 %?30?%;height:%?86?%;border-bottom:1px solid #f0f0f0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .con_onec_foo .con_onecon_title[data-v-2ab5deac]{font-size:%?30?%;color:#333;width:%?160?%}.content .con_onec_foo .con_onecon_input[data-v-2ab5deac]{width:%?530?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .con_onec_foo .con_onecon_input .text[data-v-2ab5deac]{width:%?520?%;font-size:%?30?%;color:#666;text-align:right;margin-right:%?20?%}.content .con_onec_foo .con_onecon_input .iconfont[data-v-2ab5deac]{font-size:%?30?%;color:#666}.content .email[data-v-2ab5deac]{width:%?690?%;margin:0 %?30?%;height:%?86?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-bottom:1px solid #f3f3f3}.content .email .email_l[data-v-2ab5deac]{color:#333;font-size:%?30?%;font-weight:500;width:%?160?%}.content .email .email_r[data-v-2ab5deac]{width:%?530?%;font-size:%?30?%;color:#666;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .email .email_r .iconfont[data-v-2ab5deac]{font-size:%?30?%;margin-top:%?2?%}.content .email .email_r .pickers[data-v-2ab5deac]{text-align:right;margin-right:%?20?%;width:100%}.content .content_list[data-v-2ab5deac]{width:%?690?%;margin:0 %?30?%;height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px solid #f1f1f1}.content .content_list .list_text[data-v-2ab5deac]{color:#333;font-size:%?30?%;font-weight:500}.content .content_list .list_content[data-v-2ab5deac]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#666;font-size:%?30?%;text-align:right}.content .content_list .list_content uni-input[data-v-2ab5deac]{color:#666;font-size:%?30?%;margin-right:%?10?%}.content .content_list .list_content .iconfont[data-v-2ab5deac]{font-size:%?30?%;color:#666}.content .content_worker_margin[data-v-2ab5deac]{width:100%;background-color:#fff}.content .content_worker_margin .content_worker[data-v-2ab5deac]{width:%?690?%;margin:0 %?30?%;height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px solid #f1f1f1}.content .content_worker_margin .content_worker .worker_text[data-v-2ab5deac]{color:#333;font-size:%?30?%}.content .content_worker_margin .content_worker .worker_check[data-v-2ab5deac]{display:-webkit-box;display:-webkit-flex;display:flex;width:%?118?%;height:%?63?%;border-radius:%?10?%;border:3px solid #1b82d1;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .content_worker_margin .content_worker .worker_check .worker_yesno[data-v-2ab5deac]{width:%?50?%;height:%?50?%;line-height:%?50?%;text-align:center;border-radius:%?10?%;color:#666;font-size:%?30?%}.content .content_worker_margin .content_worker .worker_check .worker_yesno.active[data-v-2ab5deac]{color:#fff;background-color:#1b82d1}.content .content_check[data-v-2ab5deac]{width:calc(100% - %?200?%);margin:0 %?30?% 0 %?170?%;height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.content .content_check .check_li[data-v-2ab5deac]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:calc(100% / 4);-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.content .content_check .check_li .check_l[data-v-2ab5deac]{width:%?20?%;height:%?20?%;border-radius:50%;border:1px solid #1b82d1;margin-right:%?9?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .content_check .check_li .check_l .check_core[data-v-2ab5deac]{width:%?12?%;height:%?12?%;border-radius:50%;background-color:#1b82d1}.content .content_check .check_li .check_l .check_active[data-v-2ab5deac]{display:block}.content .content_check .check_li .check_l .check_inactive[data-v-2ab5deac]{display:none}.content .content_check .check_li .check_r[data-v-2ab5deac]{font-size:%?30?%;color:#666;width:%?95?%}.revise[data-v-2ab5deac]{position:fixed;width:100%;height:%?88?%;bottom:0;background:-webkit-linear-gradient(left,#2466ad,#2b7ed1);background:linear-gradient(90deg,#2466ad,#2b7ed1);color:#fff;text-align:center;line-height:%?88?%}body.?%PAGE?%[data-v-2ab5deac]{background-color:#f5f5f5}',""]),e.exports=t},d080:function(e,t,i){"use strict";var n=i("ee27");i("99af"),i("ac1f"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=n(i("ed78")),c=n(i("b5bc"));var s={components:{yuDatetimePicker:c.default,pageHeadGit:o.default},data:function(){return{title:"uploadFile",imageSrc:"",dataTop:[{name:"张青",alias:"张师傅"}],footerData:[{title:"员工电话 :",content:"15888888888"},{title:"员工生日 :",content:"1998/18/18"},{title:"员工性别 :",content:"男"},{title:"证件号码 :",content:"421102199508233226"},{title:"入职日期 :",content:"1555/09/09"},{title:"家庭住址 :",content:"湖北省武汉市洪山"}],checkData:[{title:"水电工",check:!1},{title:"泥工",check:!1},{title:"木工",check:!1},{title:"油漆工",check:!1}],isWorker:[{worker:"是",isworker:!1},{worker:"否",isworker:!0}],id:0,tmp:[],username:"",postData:{id:0,homeAddress:"",empName:"",email:"",sex:"",hireDate:"",birthday:"",cardCode:"",workerType:"",worker:0,url:"",iconFileName:""},titletwo:"picker",index:0,time:"12:01",imgurl:"",datetimemargin:"",datetimemargintwo:"",date:"",datetwo:"",sex:0,sextext:"请选择",sexlist:["男","女"],gender:0,gendertext:"请选择",genderlist:["男","女"],userinfo:{}}},onUnload:function(){},onLoad:function(e){a=this,a.id=e.id,console.log(a.date),a.getuser((function(e){a.userinfo=e.data,a.iscompany=a.userinfo.userinfo.role.split("|")[1]})),a.getuserdetail(),console.log(a.userinfo.sessionId)},methods:{bindgenderChange:function(e){a.gender=e.target.value,console.log(a.gender),a.gendertext=a.genderlist[a.gender],console.log(a.gendertext)},toggleTab2:function(e,t){a.$refs.dateTime2.show()},onConfirm2:function(e){a.$forceUpdate(),a.sextext=e.selectRes.split(" ")[0]},toggleTab:function(e,t){a.$refs.dateTime.show()},onConfirm:function(e){a.$forceUpdate(),a.$set(a,"date",e.selectRes.split(" ")[0]),console.log(a.date)},timestampToTime:function(e){var t=new Date(1e3*e),i=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",a=t.getDate()+" ",o=t.getHours()+":",c=t.getMinutes()+":",s=t.getSeconds();return i+n+a+o+c+s},getuserdetail:function(){a.post("api/user/index",{},(function(e){if(1===e.code){console.log(e.data);var t=e.data.user;a.each(t,(function(e,i){null==i&&(t[e]="")})),a.$set(a,"tmp",t),"0"==a.tmp.gender?(a.gendertext="请选择",a.gender=0):"1"==a.tmp.gender?(a.gendertext="男",a.gender=0):"2"==a.tmp.gender&&(a.gendertext="女",a.gender=1),a.tmp.birthday?(a.$set(a,"datetimemargintwo",a.tmp.birthday+" 08:30:30"),console.log(a.datetimemargintwo),a.sextext=a.tmp.birthday):a.datetimemargintwo="",a.tmp.avatar?a.imageSrc=a.tmp.avatar:2==a.tmp.gender?a.imageSrc="/static/img/nv.png":a.imageSrc="/static/img/nan.png",console.log(a.tmp)}else{var i=e.msg.split("(",2);a.echo(i[0])}}))},deletefee:function(){a.postData.birthday=a.date,a.postData.hireDate=a.datetwo,a.postData.worker=0,console.log(a.postData),a.tmp.birthday=a.sextext,a.tmp.gender="1",a.tmp.company_id=a.tmp.company,"请选择"==a.sextext&&(a.tmp.birthday=""),"请选择"==a.gendertext?a.tmp.gender="0":"男"==a.gendertext&&(a.tmp.gender="1"),"女"==a.gendertext&&(a.tmp.gender="2"),a.post("api/user/profile",{address:a.tmp.address,email:a.tmp.email,idnumber:a.tmp.idnumber,nickname:a.tmp.nickname,username:a.tmp.nickname,realname:a.tmp.nickname,gender:a.tmp.gender,birthday:a.tmp.birthday,avatar:a.tmp.avatar},(function(e){if(console.log(e),1===e.code)a.success("修改成功"),a.updateuser(),uni.setStorage({key:"update_my",data:!0}),uni.navigateBack({delta:1});else{console.log("0000000000000000000"),console.log(e.msg);var t=e.msg.split("(",2);a.echo(t[0])}}))},chooseImage:function(){uni.chooseImage({count:1,sizeType:["compressed"],success:function(e){var t=e.tempFilePaths[0];a.imgCompress(t,300,(function(e){uni.uploadFile({url:a.config.host+"api/common/upload?token="+a.userinfo.token,filePath:e,fileType:"image",name:"file",formData:{},success:function(e){var t;console.log("uploadImage success, res is:",e),t=e.data;var i=JSON.parse(t);a.tmp.avatar=a.config.host+i.data.url,a.imageSrc=i.data.url,uni.showToast({title:"上传成功",icon:"success",duration:1e3}),a.imageSrc=a.config.host+i.data.url},fail:function(e){console.log("uploadImage fail",e),uni.showModal({content:e.errMsg,showCancel:!1})}})}))},fail:function(e){console.log("chooseImage fail",e)}})}}};t.default=s}}]);