(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-management-useradminister-userdetail-userdetail"],{"04d8":function(e,t,i){"use strict";i.r(t);var o=i("bf57"),l=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);t["default"]=l.a},"35a2":function(e,t,i){"use strict";var o={pageHeadBack:i("9c7e").default},l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("page-head-back",{attrs:{title:"人员信息"}}),i("v-uni-view",{staticClass:"toper"},[i("v-uni-view",{staticClass:"top_img"},[i("v-uni-image",{attrs:{"lazy-load":!0,src:e.imageSrc,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"top_text"},[i("v-uni-view",{staticClass:"con_name"},[e._v(e._s(e.tmp.realname))])],1),i("v-uni-view",{staticClass:"phone",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.phoneclick(e.tmp.mobile)}}},[i("v-uni-view",{staticClass:"iconfont iconllcouponphone"})],1)],1),i("v-uni-view",{staticClass:"xpadding"}),i("v-uni-view",{staticClass:"guild"},[i("v-uni-view",{staticClass:"guild_text"},[e._l(e.tabData,(function(t,o){return[i("v-uni-view",{key:o+"_0",staticClass:"guild_massage",class:e.nowIndex==t.id?"active":"",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.tgTabs(t.id)}}},[i("v-uni-view",{staticClass:"text"},[e._v(e._s(t.title))])],1)]}))],2)],1),i("v-uni-view",{staticClass:"xpadding"}),0==e.nowIndex?i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"content_top"},[i("v-uni-view",{staticClass:"top_header"},[e._v("基本信息")]),i("v-uni-view")],1),i("v-uni-view",{staticClass:"content_center"},[i("v-uni-view",{staticClass:"con_li"},[i("v-uni-view",{staticClass:"con_header"},[e._v("员工姓名 :")]),i("v-uni-view",{staticClass:"con_con"},[e._v(e._s(e.tmp.realname))])],1)],1),i("v-uni-view",{staticClass:"content_center"},[i("v-uni-view",{staticClass:"con_li"},[i("v-uni-view",{staticClass:"con_header"},[e._v("员工电话 :")]),i("v-uni-view",{staticClass:"con_con"},[e._v(e._s(e.tmp.mobile))])],1)],1),i("v-uni-view",{staticClass:"content_center"},[i("v-uni-view",{staticClass:"con_li"},[i("v-uni-view",{staticClass:"con_header"},[e._v("员工性别 :")]),i("v-uni-view",{staticClass:"con_con"},[e._v(e._s(e.tmp.gendertext))])],1)],1),i("v-uni-view",{staticClass:"content_center"},[i("v-uni-view",{staticClass:"con_li"},[i("v-uni-view",{staticClass:"con_header"},[e._v("员工生日 :")]),i("v-uni-view",{staticClass:"con_con"},[e._v(e._s(e.tmp.birthday))])],1)],1),i("v-uni-view",{staticClass:"content_center"},[i("v-uni-view",{staticClass:"con_li"},[i("v-uni-view",{staticClass:"con_header"},[e._v("员工邮箱 :")]),i("v-uni-view",{staticClass:"con_con"},[e._v(e._s(e.tmp.email))])],1)],1),i("v-uni-view",{staticClass:"content_center"},[i("v-uni-view",{staticClass:"con_li"},[i("v-uni-view",{staticClass:"con_header"},[e._v("证件号码 :")]),i("v-uni-view",{staticClass:"con_con"},[e._v(e._s(e.tmp.idnumber))])],1)],1),i("v-uni-view",{staticClass:"content_center"},[i("v-uni-view",{staticClass:"con_li"},[i("v-uni-view",{staticClass:"con_header"},[e._v("入职日期 :")]),i("v-uni-view",{staticClass:"con_con"},[e._v(e._s(e.tmp.createtimetext))])],1)],1),i("v-uni-view",{staticClass:"content_center"},[i("v-uni-view",{staticClass:"con_li"},[i("v-uni-view",{staticClass:"con_header"},[e._v("家庭住址 :")]),i("v-uni-view",{staticClass:"con_con"},[e._v(e._s(e.tmp.address))])],1)],1)],1):e._e(),1==e.nowIndex?i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"content_top"},[i("v-uni-view",{staticClass:"top_header"},[e._v("项目信息")]),i("v-uni-view",{staticClass:"top_img"},[i("v-uni-view",{staticClass:"iconfont"})],1)],1),i("v-uni-view")],1):e._e(),2==e.nowIndex?i("v-uni-view",{staticClass:"power_content"},[i("v-uni-view",{staticClass:"power_manager"},["100|"!==e.roledata?i("v-uni-view",{staticClass:"manager_title"},[e._v("角色权限")]):e._e(),"100|"!==e.roledata?i("v-uni-view",{staticClass:"manager_module1"},[i("v-uni-view",{staticClass:"mng_module1_left"},[e._v("创始人（全部模块）")]),i("v-uni-view",{staticClass:"mng_module1_right",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updatecsAuth()}}},[i("v-uni-switch",{staticClass:"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:"true",checked:e.roleone[0].open}})],1)],1):e._e(),"100|"!==e.roledata?i("v-uni-view",{staticClass:"manager_module2"},[i("v-uni-view",{staticClass:"mng_module2_left"},[e._v("店长（全部模块）")]),i("v-uni-view",{staticClass:"mng_module2_right",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updatedzAuth(e.roleone[1].id)}}},[i("v-uni-switch",{class:e.roleone[1].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roleone[1].isclick,checked:e.roleone[1].open}})],1)],1):e._e()],1),i("v-uni-view",{staticClass:"xpadding"}),"100|"!==e.roledata?i("v-uni-view",{staticClass:"power_list"},[i("v-uni-view",{staticClass:"power_list_title"},[i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("人事管理(员工管理模块)"),i("v-uni-text",{staticStyle:{"font-size":"22upx",color:"#999","font-weight":"100","margin-left":"20upx"}},[e._v("员工添加和赋权")])],1),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[2].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[2].isclick,checked:e.roletwo[2].open},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuth(e.roletwo[2].id,2)}}})],1)],1),e.roleone[0].open?i("v-uni-view",{staticClass:"power_list_title"},[i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("财务管理(财务模块)"),i("v-uni-text",{staticStyle:{"font-size":"22upx",color:"#999","font-weight":"100","margin-left":"20upx"}},[e._v("添加和编辑收支明细")])],1),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[6].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[6].isclick,checked:e.roleone[0].open},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuth(e.roletwo[6].id,6)}}})],1)],1):e._e(),e.roleone[0].open?e._e():i("v-uni-view",{staticClass:"power_list_title"},[i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("财务管理(财务模块)"),i("v-uni-text",{staticStyle:{"font-size":"22upx",color:"#999","font-weight":"100","margin-left":"20upx"}},[e._v("添加和编辑收支明细")])],1),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[6].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[6].isclick,checked:e.roletwo[6].open},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuth(e.roletwo[6].id,6)}}})],1)],1),i("v-uni-view",{staticClass:"xpadding"})],1):e._e(),"100|"!==e.roledata?i("v-uni-view",{staticClass:"power_list"},[i("v-uni-view",{staticClass:"power_list_title"},[i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("客户经理（客户模块）"),i("v-uni-text",{staticStyle:{"font-size":"22upx",color:"#999","font-weight":"100","margin-left":"20upx"}},[e._v("录入和分配客户")])],1),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[0].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[0].isclick,checked:e.roletwo[0].open},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuth(e.roletwo[0].id,0)}}})],1)],1),e.roletwo[0].open?i("v-uni-view",{staticClass:"power_list1"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list1_c"},[e._v("公司所有客户")]),i("v-uni-view",{staticClass:"power_list1_r"},[i("v-uni-switch",{class:e.roletwo[0].isclick?"":"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{disabled:!e.roletwo[0].isclick,checked:e.roletwo[0].all},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuthall(e.roletwo[0].id,0)}}})],1)],1):e._e(),1==e.roletwo[0].open?i("v-uni-view",{staticClass:"power_list2"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list2_c"},[e._v("仅限跟进客户")]),i("v-uni-view",{staticClass:"power_list2_r"},[i("v-uni-switch",{staticClass:"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{checked:!e.roletwo[0].all,disabled:!0}})],1)],1):e._e(),i("v-uni-view",{staticClass:"xpadding"})],1):e._e(),"100|"!==e.roledata?i("v-uni-view",{staticClass:"power_list"},[i("v-uni-view",{staticClass:"power_list_title"},[i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("工程总监（管理模块）"),i("v-uni-text",{staticStyle:{"font-size":"22upx",color:"#999","font-weight":"100","margin-left":"20upx"}},[e._v("分配项目经理")])],1),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[3].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[3].isclick,checked:e.roletwo[3].open},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuth(e.roletwo[3].id,3)}}})],1)],1),e.roletwo[3].open?i("v-uni-view",{staticClass:"power_list1"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list1_c"},[e._v("公司所有客户")]),i("v-uni-view",{staticClass:"power_list1_r"},[i("v-uni-switch",{staticClass:"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{disabled:"false",checked:e.roletwo[3].open}})],1)],1):e._e(),i("v-uni-view",{staticClass:"xpadding"})],1):e._e(),"100|"!==e.roledata?i("v-uni-view",{staticClass:"power_list"},[i("v-uni-view",{staticClass:"power_list_title"},[i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("设计师（客户模块）"),i("v-uni-text",{staticStyle:{"font-size":"22upx",color:"#999","font-weight":"100","margin-left":"20upx"}},[e._v("全过程跟进")])],1),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[1].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[1].isclick,checked:e.roletwo[1].open},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuth(e.roletwo[1].id,1)}}})],1)],1),e.roletwo[1].open?i("v-uni-view",{staticClass:"power_list1"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list1_c"},[e._v("公司所有客户")]),i("v-uni-view",{staticClass:"power_list1_r"},[i("v-uni-switch",{class:e.roletwo[1].isclick?"":"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{disabled:!e.roletwo[1].isclick,checked:e.roletwo[1].all},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuthall(e.roletwo[1].id,1)}}})],1)],1):e._e(),1==e.roletwo[1].open?i("v-uni-view",{staticClass:"power_list2"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list2_c"},[e._v("仅限跟进客户")]),i("v-uni-view",{staticClass:"power_list2_r"},[i("v-uni-switch",{staticClass:"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{checked:!e.roletwo[1].all,disabled:!0}})],1)],1):e._e(),i("v-uni-view",{staticClass:"xpadding"})],1):e._e(),"100|"!==e.roledata?i("v-uni-view",{staticClass:"power_list"},[i("v-uni-view",{staticClass:"power_list_title"},[i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("项目经理（工地模块）"),i("v-uni-text",{staticStyle:{"font-size":"22upx",color:"#999","font-weight":"100","margin-left":"20upx"}},[e._v("跟进工地")])],1),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[4].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[4].isclick,checked:e.roletwo[4].open},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuth(e.roletwo[4].id,4)}}})],1)],1),e.roletwo[4].open?i("v-uni-view",{staticClass:"power_list1"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list1_c"},[e._v("公司所有客户")]),i("v-uni-view",{staticClass:"power_list1_r"},[i("v-uni-switch",{class:e.roletwo[4].isclick?"":"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{disabled:!e.roletwo[4].isclick,checked:e.roletwo[4].all},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuthall(e.roletwo[4].id,4)}}})],1)],1):e._e(),1==e.roletwo[4].open?i("v-uni-view",{staticClass:"power_list2"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list2_c"},[e._v("仅限跟进客户")]),i("v-uni-view",{staticClass:"power_list2_r"},[i("v-uni-switch",{staticClass:"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{checked:!e.roletwo[4].all,disabled:!0}})],1)],1):e._e(),i("v-uni-view",{staticClass:"xpadding"})],1):e._e(),"100|"!==e.roledata?i("v-uni-view",{staticClass:"power_list"},[i("v-uni-view",{staticClass:"power_list_title"},[i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("监理（工地模块）"),i("v-uni-text",{staticStyle:{"font-size":"22upx",color:"#999","font-weight":"100","margin-left":"20upx"}},[e._v("跟进工地")])],1),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[5].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[5].isclick,checked:e.roletwo[5].open},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuth(e.roletwo[5].id,5)}}})],1)],1),e.roletwo[5].open?i("v-uni-view",{staticClass:"power_list1"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list1_c"},[e._v("公司所有客户")]),i("v-uni-view",{staticClass:"power_list1_r"},[i("v-uni-switch",{class:e.roletwo[5].isclick?"":"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{disabled:!e.roletwo[5].isclick,checked:e.roletwo[5].all},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuthall(e.roletwo[5].id,5)}}})],1)],1):e._e(),1==e.roletwo[5].open?i("v-uni-view",{staticClass:"power_list2"},[i("v-uni-view",{staticClass:"list_l"}),i("v-uni-view",{staticClass:"power_list2_c"},[e._v("仅限跟进客户")]),i("v-uni-view",{staticClass:"power_list2_r"},[i("v-uni-switch",{staticClass:"sopacity",staticStyle:{transform:"scale(0.6)"},attrs:{checked:!e.roletwo[5].all,disabled:!0}})],1)],1):e._e(),i("v-uni-view",{staticClass:"xpadding"})],1):e._e(),"100|"!==e.roledata?i("v-uni-view",{staticClass:"xpadding"}):e._e(),e.isadmintext?e._e():i("v-uni-view",{staticClass:"power_list"},[i("v-uni-view",{staticClass:"power_list_title"},["100|"!==e.roledata?i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("将员工设为离职")]):e._e(),"100|"==e.roledata?i("v-uni-view",{staticClass:"power_list_titlel"},[e._v("取消员工离职")]):e._e(),i("v-uni-view",{staticClass:"power_list_titler"},[i("v-uni-switch",{class:e.roletwo[5].isclick?"":"sopacity",staticStyle:{transform:"scale(0.82)"},attrs:{disabled:!e.roletwo[5].isclick,checked:"100|"==e.roledata},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateAuthleave()}}})],1)],1)],1)],1):e._e(),i("v-uni-view",{staticClass:"xpadding"})],1)},a=[];i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return o}))},8148:function(e,t,i){var o=i("f350");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var l=i("4f06").default;l("69b4b008",o,!0,{sourceMap:!1,shadowMode:!1})},a201:function(e,t,i){"use strict";i.r(t);var o=i("35a2"),l=i("04d8");for(var a in l)"default"!==a&&function(e){i.d(t,e,(function(){return l[e]}))}(a);i("ef02");var s,n=i("f0c5"),c=Object(n["a"])(l["default"],o["b"],o["c"],!1,null,"9639c0e4",null,!1,o["a"],s);t["default"]=c.exports},bf57:function(e,t,i){"use strict";var o=i("ee27");i("99af"),i("a15b"),i("ac1f"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,a=o(i("9c7e")),s={components:{pageHeadBack:a.default},data:function(){return{name:[{name:"李明",alias:"李师傅"}],nowIndex:0,isworker:{0:"非工人",1:"工人"},tabData:[{title:"基本信息",id:0},{title:"权限信息",id:2}],powerListData:[{title:"市场销售（销售模块）",powerTop:"公司所有客户",powerTopActive:!0,powerTopDisabled:!1,powerFooterActive:!1,powerFooterDisabled:!1,powerFooter:"仅限跟进客户"},{title:"设计师（设计模块）",powerTop:"公司所有客户",powerTopActive:!0,powerTopDisabled:!1,powerFooterActive:!0,powerFooterDisabled:!1,powerFooter:"仅限跟进客户"},{title:"项目经理（项目模块）",powerTop:"公司所有客户",powerTopActive:!1,powerTopDisabled:!0,powerFooterActive:!1,powerFooterDisabled:!0,powerFooter:"仅限跟进客户"},{title:"材料员（材料模块）",powerTop:"公司所有客户",powerTopActive:!0,powerTopDisabled:!1,powerFooterActive:!0,powerFooterDisabled:!1,powerFooter:"仅限跟进客户"},{title:"工人（工人模块）",powerTop:"公司所有客户",powerTopActive:!0,powerTopDisabled:!1,powerFooterActive:!1,powerFooterDisabled:!1,powerFooter:"仅限跟进客户"}],id:0,tmp:[],ischeckedone:!1,ischeckedonefirst:!1,ischeckedonesecond:!1,isdisabledone:!1,opacityone:.2,roleArr:{"管理员":{flag:!1,all:!1,auth:!1,one:!1},"店长":{flag:!1,all:!1,auth:!1,one:!1},"客服":{flag:!1,all:!1,auth:!1,one:!1},"设计师":{flag:!1,all:!1,auth:!1,one:!1},"财务":{flag:!1,all:!1,auth:!1,one:!1},"工程总监":{flag:!1,all:!1,auth:!1,one:!1},"项目经理":{flag:!1,all:!1,auth:!1,one:!1},"监理":{flag:!1,all:!1,auth:!1,one:!1},"供应商":{flag:!1,all:!1,auth:!1,one:!1}},myroledata:"",tmproledata:{},userinfo:{},istrue:!0,imageSrc:"",roledata:"",rolelist:[],roleone:[],roletwo:[],myuserid:"",isfalse:!0,isadmintext:!1,staffcusnum:"",ismanager:!1,iscompany:""}},onShow:function(){l.getuser((function(e){console.log(e),l.userinfo=e.data,l.iscompany=l.userinfo.userinfo.role.split("|")[1],console.log(l.iscompany),l.myuserid=l.userinfo.id,l.getuserdetail(),console.log(l.roleArr),l.checkPower(l.userinfo,"api/staff/detail")?l.$set(l,"ismanager",!0):l.id==l.userinfo.id?l.$set(l,"ismanager",!0):l.$set(l,"ismanager",!1)}))},onLoad:function(e){l=this,l.id=e.id,console.log(l.id),l.getuser((function(e){l.userinfo=e.data,l.myuserid=l.userinfo.id,console.log(l.myuserid)}))},methods:{timestampToTime:function(e){var t=new Date(1e3*e),i=t.getFullYear()+"-",o=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",l=t.getDate()+" ",a=t.getHours()+":",s=t.getMinutes()+":",n=t.getSeconds();return i+o+l+a+s+n},getuserdetail:function(){l.post("api/staff/detail",{company_id:l.iscompany,user_id:l.id},(function(e){if(1===e.code){var t=e.data.user;l.each(t,(function(e,i){null==i&&(t[e]="")})),l.$set(l,"tmp",t),"0"==l.tmp.gender?l.tmp.gendertext="未知":"1"==l.tmp.gender?l.tmp.gendertext="男":"2"==l.tmp.gender&&(l.tmp.gendertext="女"),l.tmp.createtime&&(l.tmp.createtimetext=l.timestampToTime(l.tmp.createtime).split(" ")[0]),l.tmp.avatar?l.imageSrc=l.tmp.avatar:2==l.tmp.gender?l.imageSrc="/static/img/nv.png":l.imageSrc="/static/img/nan.png",l.roledata=e.data.roles,console.log(l.roledata),l.post("api/staff/detail",{company_id:l.iscompany,user_id:l.myuserid},(function(e){if(1===e.code)""==e.data.roles?l.myroledata="0":l.myroledata=e.data.roles,l.getrolequery();else{var t=e.msg.split("(",2);l.echo(t[0])}}))}else{var i=e.msg.split("(",2);l.echo(i[0])}}))},getrolequery:function(){l.post("api/role/power_list",{},(function(e){if(1===e.code){console.log(e.data[0]._child),l.rolelist=e.data[0]._child,l.roleone=[],l.roletwo=[],l.each(l.rolelist,(function(e,t){"2"==t.id?l.roleone=l.roleone.concat(t):"3"==t.id?l.roleone=l.roleone.concat(t):l.roletwo=l.roletwo.concat(t)})),console.log("这个客户的权限是：_____________________________________"),console.log(l.roledata),console.log("我的的权限是："),console.log(l.myroledata);var t={},i=l.roledata.split(",");console.log(i),l.each(i,(function(e,i){2==i.split("|")[0]&&(l.$set(l,"isadmintext",!0),console.log("这个人是管理员，无法看到离职员工这条信息哦")),t[i.split("|")[0]]={id:i.split("|")[0],all:"",open:""},i.split("|")[0]&&"1"!=i.split("|")[0]?t[i.split("|")[0]].open=!0:t[i.split("|")[0]].open=!1,i.split("|")[1]&&"1"===i.split("|")[1]?t[i.split("|")[0]].all=!0:t[i.split("|")[0]].all=!1})),console.log(t),l.each(l.roleone,(function(e,i){l.checkEmpty(t[i.id])?(l.$set(l.roleone[e],"open",!1),l.$set(l.roleone[e],"all",!1)):(console.log(t[i.id].all),console.log("这个人有"+i.id+"的权限"),l.$set(l.roleone[e],"open",t[i.id].open),l.$set(l.roleone[e],"all",t[i.id].all))})),l.each(l.roletwo,(function(e,i){l.checkEmpty(t[i.id])?(l.roletwo[e]["all"]=!1,l.roletwo[e]["open"]=!1):(l.roletwo[e]["all"]=t[i.id].all,l.roletwo[e]["open"]=t[i.id].open)})),console.log(l.roleone),console.log(l.roletwo),console.log(l.myroledata);var o=l.myroledata.split(",");if(console.log(o),l.isAdmin())console.log("我是管理员哦"),l.id==l.userinfo.id?(console.log("我不能改自己的权限"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}))):(console.log("我可以改别人的权限"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!0})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!0})));else if(l.isManager()){if(console.log("我是店长哈"),l.id==l.userinfo.id)console.log("这是我自己 不能改自己的权限啦"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}));else if(l.id!==l.userinfo.id){console.log("这不是我"+l.id+"看他是不是管理员店长哈"+l.userinfo.id);l.roledata.split(",");l.staffisAdmin()?(console.log("这是 管理员 不能点啦"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}))):l.staffisManager()?(console.log("这是 店长 不能点啦"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}))):(console.log("这不是 管理员 店长 可以修改他的权限哦~"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!0})))}}else if(l.isHr()){if(console.log("我是人事哈"),l.id==l.userinfo.id)console.log("这是我自己 不能改自己的权限啦"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}));else if(l.id!==l.userinfo.id){console.log("这不是我"+l.id+"看他是不是管理员店长哈"+l.userinfo.id);l.roledata.split(",");l.staffisAdmin()?(console.log("这是 管理员 不能点啦"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}))):l.staffisManager()?(console.log("这是 店长 不能点啦"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}))):l.staffisHr()?(console.log("这是 和我一样的人事 不能点啦"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}))):(console.log("这不是 管理员 店长 人事 可以修改他的权限哦~"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){console.log(t.id),"6"==t.id?l.roletwo[e]["isclick"]=!1:l.roletwo[e]["isclick"]=!0})))}}else console.log("我啥都不是~谁的权限都不能改啦"),l.each(l.roleone,(function(e,t){l.roleone[e]["isclick"]=!1})),l.each(l.roletwo,(function(e,t){l.roletwo[e]["isclick"]=!1}))}else{var a=e.msg.split("(",2);l.echo(a[0])}}))},isAdmin:function(){var e=!1,t=l.myroledata.split(",");return l.each(t,(function(t,i){"2"==i.split("|")[0]&&(e=!0)})),e},staffisAdmin:function(){var e=!1,t=l.roledata.split(",");return l.each(t,(function(t,i){"2"==i.split("|")[0]&&(e=!0)})),e},isHr:function(){var e=!1,t=l.myroledata.split(",");return l.each(t,(function(t,i){"6"==i.split("|")[0]&&(e=!0)})),e},isManager:function(){var e=!1,t=l.myroledata.split(",");return l.each(t,(function(t,i){"3"==i.split("|")[0]&&(e=!0)})),e},staffisManager:function(){var e=!1,t=l.roledata.split(",");return l.each(t,(function(t,i){"3"==i.split("|")[0]&&(e=!0)})),e},staffisHr:function(){var e=!1,t=l.roledata.split(",");return l.each(t,(function(t,i){"6"==i.split("|")[0]&&(e=!0)})),e},toWorkconnect:function(){uni.navigateTo({url:"/pages/index/workconnect/workconnect"})},tgRole:function(e){},updateAuthall:function(e,t){if(0==l.roletwo[t].isclick);else if(l.$set(l.roletwo[t],"all",!l.roletwo[t].all),1==l.roletwo[t].all){var i=[];l.each(l.roletwo,(function(e,t){var o="";console.log("角色"+t.id+"是否打开："+t.open+"是否所有："+t.all),1==t.open&&(o=1==t.all?t.id+"|1":t.id+"|0",console.log(o),i=i.concat(o))})),console.log(i);var o="";o=i.join(","),console.log(o),l.post("api/role/toggle_power",{company_id:l.iscompany,user_id:l.id,power:o},(function(e){if(1===e.code)console.log("赋予"+o+"的所有客户查看权限成功"),l.getuserdetail();else{var t=e.msg.split("(",2);l.echo(t[0])}}))}else{var a=[];l.each(l.roletwo,(function(e,t){var i="";console.log("角色"+t.id+"是否打开："+t.open+"是否所有："+t.all),1==t.open&&(i=1==t.all?t.id+"|1":t.id+"|0",console.log(i),a=a.concat(i))})),console.log(a);var s="";s=a.join(","),console.log(s),l.post("api/role/toggle_power",{company_id:l.iscompany,user_id:l.id,power:s},(function(e){if(1===e.code)console.log("移除"+s+"所有客户查看权限成功"),l.getuserdetail();else{var t=e.msg.split("(",2);l.echo(t[0])}}))}},updatedzAuth:function(e){if(0==l.roleone[1].isclick);else if(l.$set(l.roleone[1],"open",!l.roleone[1].open),console.log(l.roleone[1].open),1==l.roleone[1].open){var t="";t=t.concat(e+"|1,4|1,5|1,6|1,7|1,8|1,9|1,10|1,14|1"),l.post("api/role/toggle_power",{company_id:l.iscompany,user_id:l.id,power:t},(function(e){if(1===e.code)console.log("赋予店长权限成功"),l.getuserdetail();else{var t=e.msg.split("(",2);l.echo(t[0])}}))}else{var i="";i=" ",l.post("api/role/toggle_power",{company_id:l.iscompany,user_id:l.id,power:i},(function(e){if(1===e.code)console.log("移除店长权限"+i+"成功"),l.getuserdetail();else{var t=e.msg.split("(",2);l.echo(t[0])}}))}},updateAuthleave:function(){0==l.roletwo[4].isclick||("100|"==l.roledata?l.post("api/role/toggle_power",{company_id:l.iscompany,user_id:l.id,power:""},(function(e){if(1===e.code)console.log("取消离职成功"),l.getuserdetail(),uni.setStorage({key:"update_mana",data:!0});else{var t=e.msg.split("(",2);l.echo(t[0])}})):l.post("api/role/toggle_power",{company_id:l.iscompany,user_id:l.id,power:"100|"},(function(e){if(1===e.code)console.log("离职成功"),l.getuserdetail(),uni.setStorage({key:"update_mana",data:!0});else{var t=e.msg.split("(",2);l.echo(t[0])}})))},updateAuth:function(e,t){if(console.log(t),0==l.roletwo[t].isclick);else if("100|"==l.roledata)l.echo("员工已离职！");else if(l.$set(l.roletwo[t],"open",!l.roletwo[t].open),console.log(l.roletwo[t].open),1==l.roletwo[t].open){var i=[];l.each(l.roletwo,(function(e,t){var o="";console.log(t.id+"juese"+t.open),1==t.open&&(o=1==t.all?t.id+"|1":t.id+"|0",console.log(o),i=i.concat(o))})),console.log(i);var o="";o=i.join(","),console.log(o),l.post("api/role/toggle_power",{company_id:l.iscompany,user_id:l.id,power:o},(function(e){if(1===e.code)console.log("赋予"+o+"权限成功"),l.getuserdetail(),uni.setStorage({key:"update_mana",data:!0});else{var t=e.msg.split("(",2);l.echo(t[0])}}))}else{var a=[];l.each(l.roletwo,(function(e,t){var i="";console.log(t.id+"juese"+t.open),1==t.open&&(i=1==t.all?t.id+"|1":t.id+"|0",console.log(i),a=a.concat(i))})),console.log(a);var s="";s=a.join(","),console.log(s),l.post("api/role/toggle_power",{company_id:l.iscompany,user_id:l.id,power:s},(function(e){if(1===e.code)console.log("赋予"+s+"权限成功"),l.getuserdetail(),uni.setStorage({key:"update_mana",data:!0});else{var t=e.msg.split("(",2);l.echo(t[0])}}))}},tgTabs:function(e){l.nowIndex=e},isCheckedclickone:function(){l.ischeckedone=!l.ischeckedone},clickchange:function(){console.log("xiugai"),l.checkPower(l.userinfo,"api/staff/detail")?(console.log("1"),uni.navigateTo({url:"/pages/management/useradminister/userdetail/informationchange/informationchange?id="+l.id})):l.id==l.userinfo.id&&(console.log("我是本人哦"),uni.navigateTo({url:"/pages/management/useradminister/userdetail/informationchange/informationchange?id="+l.id}))},phoneclick:function(e){uni.makePhoneCall({phoneNumber:e})},toleavestaff:function(){l.staffcusnum>0?(console.log(l.staffcusnum),l.echo("请先交出该员工的客户再离职哦~")):(console.log("离职啦"),uni.navigateTo({url:"/pages/management/useradminister/userdetail/leavestaff/leavestaff?id="+l.id}))},updatecsAuth:function(){}}};t.default=s},ef02:function(e,t,i){"use strict";var o=i("8148"),l=i.n(o);l.a},f350:function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-9639c0e4]{background-color:#f5f5f5}uni-switch[data-v-9639c0e4]{width:%?88?%;height:%?60?%}.toper[data-v-9639c0e4]{width:100%;height:%?88?%;padding-top:%?36?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-bottom:%?25?%;background-color:#fff}.toper .top_img[data-v-9639c0e4]{width:%?88?%;height:%?88?%;margin-left:%?30?%;margin-right:%?12?%;border-radius:50%;overflow:hidden}.toper .top_img uni-image[data-v-9639c0e4]{width:100%;height:100%}.toper .top_text[data-v-9639c0e4]{height:%?88?%;line-height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex}.toper .top_text .con_name[data-v-9639c0e4]{text-align:center;font-size:%?36?%;margin-right:%?14?%;margin-left:%?10?%}.toper .top_text .line[data-v-9639c0e4]{width:%?2?%;height:%?30?%;background:#333;margin-top:%?32?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.toper .top_text .con_alias[data-v-9639c0e4]{color:#666;font-size:%?24?%;margin-left:%?15?%}.toper .phone[data-v-9639c0e4]{margin-left:auto;margin-right:%?34?%;margin-top:%?10?%;width:%?66?%;height:%?66?%;border-radius:50%;background-color:#2468b1;color:#fff}.toper .phone .iconfont[data-v-9639c0e4]{text-align:center;height:%?66?%;line-height:%?66?%;font-size:%?38?%}.guild[data-v-9639c0e4]{width:100%;background-color:#fff}.guild .guild_text[data-v-9639c0e4]{margin-left:%?30?%;margin-right:%?30?%;display:-webkit-box;display:-webkit-flex;display:flex}.guild .guild_text .guild_massage[data-v-9639c0e4]{width:calc(100% / 2);position:relative}.guild .guild_text .guild_massage .text[data-v-9639c0e4]{height:%?78?%;line-height:%?78?%;font-size:%?36?%;text-align:center;color:#333}.guild .guild_text .guild_massage.active[data-v-9639c0e4]{color:#1b82d1}.guild .guild_text .guild_massage.active[data-v-9639c0e4]:after{position:absolute;bottom:0;width:100%;height:5px;content:"";background:-webkit-linear-gradient(left,#2466ad,#2b7ed1);background:linear-gradient(90deg,#2466ad,#2b7ed1)}.content[data-v-9639c0e4]{width:100%;background-color:#fff}.content .content_top[data-v-9639c0e4]{height:%?90?%;line-height:%?90?%;display:-webkit-box;display:-webkit-flex;display:flex;margin-left:%?28?%;margin-right:%?32?%;width:calc(100%-60upx);border-bottom:1px solid #f1f1f1;position:relative}.content .content_top .top_header[data-v-9639c0e4]{font-size:%?30?%;color:#333;font-weight:700}.content .content_top .top_img[data-v-9639c0e4]{height:%?50?%;line-height:%?50?%;margin-top:%?20?%;position:absolute;right:%?4?%}.content .content_top .top_img .iconfont[data-v-9639c0e4]{color:#2468b1;text-align:center;font-size:%?44?%}.content .content_center[data-v-9639c0e4]{width:100%}.content .content_center .con_li[data-v-9639c0e4]{height:%?87?%;width:calc(100%-60upx);margin-left:%?28?%;margin-right:%?32?%;border-bottom:1px solid #f1f1f1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .content_center .con_li .con_header[data-v-9639c0e4]{min-width:%?150?%;font-size:%?30?%;font-weight:700;color:#333}.content .content_center .con_li .con_con[data-v-9639c0e4]{color:#666;font-size:%?28?%;margin-left:%?12?%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.leavestaff[data-v-9639c0e4]{width:100%;height:%?88?%;font-size:%?30?%;color:#666;font-weight:700;text-align:center;line-height:%?88?%;margin-top:%?20?%;background-color:#fff}.power_content .power_manager[data-v-9639c0e4]{background-color:#fff;width:100%}.power_content .power_manager .manager_title[data-v-9639c0e4]{height:%?89?%;line-height:%?89?%;color:#333;font-size:%?30?%;margin-left:%?30?%;margin-right:%?30?%;width:calc(100%-60upx);border-bottom:1px solid #f1f1f1;font-weight:700}.power_content .power_manager .manager_module1[data-v-9639c0e4]{height:%?89?%;line-height:%?89?%;color:#333;font-size:%?30?%;margin-left:%?30?%;margin-right:%?30?%;width:calc(100%-60upx);border-bottom:1px solid #f1f1f1;display:-webkit-box;display:-webkit-flex;display:flex;font-weight:700}.power_content .power_manager .manager_module1 .mng_module1_right[data-v-9639c0e4]{margin-left:auto}.power_content .power_manager .manager_module1 .mng_module1_right .sopacity[data-v-9639c0e4]{opacity:.5}.power_content .power_manager .manager_module2[data-v-9639c0e4]{height:%?89?%;line-height:%?89?%;color:#333;font-size:%?30?%;margin-left:%?30?%;margin-right:%?30?%;width:calc(100%-60upx);display:-webkit-box;display:-webkit-flex;display:flex;font-weight:700}.power_content .power_manager .manager_module2 .mng_module2_right[data-v-9639c0e4]{margin-left:auto}.power_content .power_manager .manager_module2 .mng_module2_right .sopacity[data-v-9639c0e4]{opacity:.5}.power_content .power_list[data-v-9639c0e4]{background-color:#fff;width:100%}.power_content .power_list .power_list_title[data-v-9639c0e4]{height:%?89?%;line-height:%?89?%;color:#333;font-size:%?30?%;margin-left:%?30?%;margin-right:%?30?%;width:calc(100%-60upx);border-bottom:1px solid #f1f1f1;font-weight:700;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.power_content .power_list .power_list_title .power_list_titler .sopacity[data-v-9639c0e4]{opacity:.5}.power_content .power_list .power_list1[data-v-9639c0e4]{height:%?89?%;line-height:%?89?%;color:#333;font-size:%?30?%;margin-left:%?30?%;margin-right:%?30?%;width:calc(100%-60upx);border-bottom:1px solid #f1f1f1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.power_content .power_list .power_list1 .list_l[data-v-9639c0e4]{width:%?24?%;height:%?24?%;border-bottom:2px solid #1b82d1;border-left:2px solid #1b82d1}.power_content .power_list .power_list1 .power_list1_c[data-v-9639c0e4]{font-size:%?30?%;color:#333;margin-left:%?10?%}.power_content .power_list .power_list1 .power_list1_r[data-v-9639c0e4]{margin-left:auto}.power_content .power_list .power_list1 .power_list1_r .sopacity[data-v-9639c0e4]{opacity:.5}.power_content .power_list .power_list2[data-v-9639c0e4]{height:%?89?%;line-height:%?89?%;color:#333;font-size:%?30?%;margin-left:%?30?%;margin-right:%?30?%;width:calc(100%-60upx);border-bottom:1px solid #f1f1f1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.power_content .power_list .power_list2 .list_l[data-v-9639c0e4]{width:%?24?%;height:%?24?%;border-bottom:2px solid #1b82d1;border-left:2px solid #1b82d1}.power_content .power_list .power_list2 .power_list2_c[data-v-9639c0e4]{font-size:%?30?%;color:#333;margin-left:%?10?%}.power_content .power_list .power_list2 .power_list2_r[data-v-9639c0e4]{margin-left:auto}.power_content .power_list .power_list2 .power_list2_r .sopacity[data-v-9639c0e4]{opacity:.5}.fixed[data-v-9639c0e4]{position:fixed;width:100%;height:%?88?%;bottom:0;background:-webkit-linear-gradient(left,#2466ad,#2b7ed1);background:linear-gradient(90deg,#2466ad,#2b7ed1);color:#fff;text-align:center;line-height:%?88?%}body.?%PAGE?%[data-v-9639c0e4]{background-color:#f5f5f5}',""]),e.exports=t}}]);