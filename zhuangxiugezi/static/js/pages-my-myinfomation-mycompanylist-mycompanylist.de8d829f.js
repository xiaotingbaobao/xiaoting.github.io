(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-myinfomation-mycompanylist-mycompanylist"],{3535:function(t,i,e){"use strict";var a=e("ee27");e("ac1f"),e("1276"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o=a(e("9c7e")),s=a(e("9fee")),r={components:{pageHeadBack:o.default,graceFullLoading:s.default},data:function(){return{graceFullLoading:!0,radiocheck:!1,tmplist:[],userinfo:[],supliercode:"",issupplierid:!1}},onLoad:function(){n=this},onShow:function(){n.getuser((function(t){console.log(t),n.userinfo=t.data,console.log(n.userinfo),n.rolesendnum=n.userinfo.userinfo.role,n.iscompany=n.userinfo.userinfo.role.split("|")[1],n.getroletmplist()}))},methods:{getroletmplist:function(){n.post("api/staff/supplier_list",{user_id:n.userinfo.id},(function(t){if(1===t.code)0==t.data.length?(n.$set(n,"issupplierid",!1),n.gettmplist()):(n.supliercode=t.data[0].supplier,n.$set(n,"issupplierid",!0),n.gettmplist());else{var i=t.msg.split("(",2);n.echo(i[0])}}))},radioclick:function(t){console.log("______________________________");var i="";i="company|"+n.tmplist[t].id,n.post("api/role/toggle_role",{role:i},(function(i){if(1===i.code)console.log(i),n.each(n.tmplist,(function(t,i){n.$set(n.tmplist[t],"isthiscompany",!1)})),n.$set(n.tmplist[t],"isthiscompany",!0),console.log(n.tmplist[t].isthiscompany),n.$forceUpdate(),n.updateuser(),uni.setStorage({key:"update_my",data:!0}),uni.setStorage({key:"update_mana",data:!0});else{var e=i.msg.split("(",2);n.echo(e[0])}}))},gettmplist:function(){n.issupplierid?(console.log("查询当前身份为供应商所在的公司列表"),n.post("api/supplier/company_list",{supplier_code:n.supliercode},(function(t){if(1===t.code)console.log(t),n.tmplist=t.data,console.log(n.iscompany),n.each(n.tmplist,(function(t,i){i.isthiscompany=!1,i.id==n.iscompany&&n.$set(n.tmplist[t],"isthiscompany",!0),i.logo?i.avatar=i.avatar:i.avatar="/static/img/gslogo.png"})),n.graceFullLoading=!1;else{var i=t.msg.split("(",2);n.echo(i[0])}}))):n.post("api/staff/company_list",{user_id:n.userinfo.id},(function(t){if(1===t.code)console.log(t),n.tmplist=t.data,console.log(n.iscompany),n.each(n.tmplist,(function(t,i){i.isthiscompany=!1,i.id==n.iscompany&&n.$set(n.tmplist[t],"isthiscompany",!0),i.avatar?i.avatar=i.avatar:i.avatar="/static/img/gslogo.png"})),n.graceFullLoading=!1;else{var i=t.msg.split("(",2);n.echo(i[0])}}))},goconpanydetail:function(t){uni.setStorage({key:"conpany_detail",data:t,success:function(){uni.navigateTo({url:"/pages/index/company/company"})}})}}};i.default=r},"3ec7":function(t,i,e){"use strict";var a={pageHeadBack:e("9c7e").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("page-head-back",{attrs:{title:"我的公司"}}),e("v-uni-view",{staticClass:"xpadding"}),0==t.tmplist.length?e("v-uni-view",{staticClass:"xlistmargin"},[t._v("暂无公司！")]):t._e(),0!==t.tmplist.length?e("v-uni-view",{staticClass:"main"},t._l(t.tmplist,(function(i,a){return e("v-uni-view",{key:a,staticClass:"itemsmargin",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goconpanydetail(i)}}},[e("v-uni-view",{class:["items",0==i.used||-1==i.used?"active":""]},[e("v-uni-view",{staticClass:"left"},[e("v-uni-image",{attrs:{"lazy-load":!0,src:i.avatar,mode:"aspectFill"}})],1),e("v-uni-view",{staticClass:"right"},[e("v-uni-view",{staticClass:"top"},[t._v(t._s(i.short))]),e("v-uni-view",{staticClass:"foo"},[e("v-uni-view",{staticClass:"foo_left"},[t._v("公司代码："+t._s(i.code))]),0==i.isthiscompany&&1===i.used?e("v-uni-view",{staticClass:"foo_right",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.radioclick(a)}}},[e("v-uni-radio",{staticStyle:{transform:"scale(0.76)"}}),e("v-uni-view",{staticClass:"text"},[t._v("设为当前")])],1):t._e(),1!==i.used?e("v-uni-view",{staticClass:"foo_righttwo"},[e("v-uni-view",{staticClass:"text"},[t._v("禁用")])],1):t._e(),1==i.isthiscompany?e("v-uni-view",{staticClass:"foo_right"},[e("v-uni-radio",{staticStyle:{transform:"scale(0.76)"},attrs:{checked:"true"}}),e("v-uni-view",{staticClass:"text"},[t._v("当前公司")])],1):t._e()],1)],1)],1),e("v-uni-view",{staticClass:"xpadding"})],1)})),1):t._e()],1)},o=[];e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}))},"4f16":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,"@-webkit-keyframes grace-fade-data-v-38501214{0%{opacity:.9}25%{opacity:1}50%{opacity:.9}75%{opacity:1}100%{opacity:1}}@keyframes grace-fade-data-v-38501214{0%{opacity:.9}25%{opacity:1}50%{opacity:.9}75%{opacity:1}100%{opacity:1}}.grace-full-loading .content[data-v-38501214]{width:%?300?%;height:auto;position:absolute;z-index:100;left:50%;top:40%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-animation:grace-fade-data-v-38501214 3.5s infinite linear;animation:grace-fade-data-v-38501214 3.5s infinite linear;opacity:.9;padding:%?10?%}.grace-full-loading .image[data-v-38501214]{width:%?150?%;height:%?150?%;margin:0 auto}.grace-full-loading .image uni-image[data-v-38501214]{width:%?150?%;height:%?150?%;border-radius:50%}.grace-full-loading .text[data-v-38501214]{line-height:1.5em;font-size:%?22?%;margin-top:6px;text-align:center}\r\n\r\n/* .grace-full-loading{width:100%; height:100%; background:#FFFFFF; z-index:99;}\r\n.grace-full-loading .content{width:300rpx; height:auto;  z-index:100;  transform:translate(-50%, -50%); animation:grace-fade 3500ms infinite linear; opacity:0.6; padding:10rpx;}\r\n.grace-full-loading .image{width:150rpx; height:150rpx; margin:0 auto;}\r\n.grace-full-loading .image image{width:150rpx; height:150rpx; border-radius:150rpx;}\r\n.grace-full-loading .text{line-height:1.5em; font-size:22upx; margin-top:6px; font-style:italic; text-align:center;} */",""]),t.exports=i},"5be3":function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.graceFullLoading?e("v-uni-view",{staticClass:"grace-full-loading",on:{touchmove:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.stopFun.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.stopFun.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"image"},[e("v-uni-image",{attrs:{src:t.logoUrl,mode:"aspectFill"}})],1),e("v-uni-view",{staticClass:"text"},[t._v(t._s(t.text))])],1)],1):t._e()},o=[];e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}))},"5e86":function(t,i,e){var a=e("b9ef");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("77ee7f6f",a,!0,{sourceMap:!1,shadowMode:!1})},"6ab6":function(t,i,e){"use strict";e.r(i);var a=e("99ab"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},"7f5b":function(t,i,e){"use strict";var a=e("5e86"),n=e.n(a);n.a},"99ab":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={name:"graceFullLoading",props:{graceFullLoading:{type:Boolean,default:!1},logoUrl:{type:String,default:""},text:{type:String,default:"Loading ..."}},methods:{stopFun:function(){return!1}}};i.default=a},"9fee":function(t,i,e){"use strict";e.r(i);var a=e("5be3"),n=e("6ab6");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("c258");var s,r=e("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"38501214",null,!1,a["a"],s);i["default"]=c.exports},b9ef:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-68c07557]{background-color:#f9f9f9}.main[data-v-68c07557]{width:%?690?%;margin:0 %?30?%}.main .items[data-v-68c07557]{width:100%;background-color:#fff;border-radius:%?10?%;display:-webkit-box;display:-webkit-flex;display:flex;height:%?160?%}.main .items .left[data-v-68c07557]{width:%?100?%;height:%?100?%;margin:%?20?% %?20?% 0 %?10?%;border-radius:50%;overflow:hidden}.main .items .left uni-image[data-v-68c07557]{width:100%;height:100%}.main .items .right[data-v-68c07557]{width:%?560?%;height:%?160?%}.main .items .right .top[data-v-68c07557]{width:%?560?%;font-size:%?34?%;color:#333;font-weight:700;height:%?80?%;line-height:%?80?%}.main .items .right .foo[data-v-68c07557]{width:%?560?%;height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.main .items .right .foo .foo_left[data-v-68c07557]{font-size:%?26?%;color:#999}.main .items .right .foo .foo_right[data-v-68c07557]{display:-webkit-box;display:-webkit-flex;display:flex;margin-right:%?20?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.main .items .right .foo .foo_right uni-radio[data-v-68c07557]{color:#2468b1}.main .items .right .foo .foo_right .text[data-v-68c07557]{font-size:%?34?%;color:#666}.main .items .right .foo .foo_righttwo[data-v-68c07557]{display:-webkit-box;display:-webkit-flex;display:flex;margin-right:%?20?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.main .items .right .foo .foo_righttwo uni-radio[data-v-68c07557]{color:#2468b1}.main .items .right .foo .foo_righttwo .text[data-v-68c07557]{font-size:%?30?%;color:#666}.main .active[data-v-68c07557]{background:#eee}body.?%PAGE?%[data-v-68c07557]{background-color:#f9f9f9}',""]),t.exports=i},c258:function(t,i,e){"use strict";var a=e("eed4"),n=e.n(a);n.a},c946:function(t,i,e){"use strict";e.r(i);var a=e("3ec7"),n=e("fcc7");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("7f5b");var s,r=e("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"68c07557",null,!1,a["a"],s);i["default"]=c.exports},eed4:function(t,i,e){var a=e("4f16");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("4ae281b9",a,!0,{sourceMap:!1,shadowMode:!1})},fcc7:function(t,i,e){"use strict";e.r(i);var a=e("3535"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a}}]);