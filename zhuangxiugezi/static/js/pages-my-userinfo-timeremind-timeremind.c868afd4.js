(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-userinfo-timeremind-timeremind"],{"061c":function(e,t,i){"use strict";var n=i("ad88"),a=i.n(n);a.a},"08a7":function(e,t,i){"use strict";i.r(t);var n=i("a4dd"),a=i("4907");for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("061c");var s,c=i("f0c5"),r=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"3839c102",null,!1,n["a"],s);t["default"]=r.exports},"1fcf4":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-3839c102]{background-color:#fafafa}.channel[data-v-3839c102]{width:100%}.channel .items[data-v-3839c102]{width:calc(100% - %?60?%);margin:0 %?30?%;background-color:#fff;border-radius:%?10?%;margin-bottom:%?20?%}.channel .items .items_top[data-v-3839c102]{width:calc(100% - %?60?%);margin:0 %?30?%;height:%?87?%;border-bottom:1px solid #f5f5f5;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex}.channel .items .items_top .left_title[data-v-3839c102]{width:%?160?%;color:#333;font-weight:700;font-size:%?30?%;height:%?87?%;line-height:%?87?%}.channel .items .items_top .right_input[data-v-3839c102]{width:%?470?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.channel .items .items_top .right_input .input[data-v-3839c102]{width:%?420?%;color:#666;font-size:%?30?%}.channel .items .items_top .right_input .inputadd[data-v-3839c102]{width:%?270?%;color:#666;font-size:%?30?%}.channel .items .items_top .right_input .iconfont[data-v-3839c102]{color:#2468b1;font-size:%?40?%}.channel .items .items_top .right_input .right[data-v-3839c102]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.channel .items .items_top .right_input .right .iconfont[data-v-3839c102]{color:#2468b1;font-size:%?32?%;margin-right:%?6?%}.channel .items .items_top .right_input .right .text[data-v-3839c102]{color:#2468b1;font-size:%?24?%}.channel .items .items_center[data-v-3839c102]{width:calc(100% - %?60?%);margin:0 %?30?%;height:%?87?%;border-bottom:1px solid #f5f5f5;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex}.channel .items .items_center .title[data-v-3839c102]{width:%?160?%;color:#333;font-weight:700;font-size:%?30?%;height:%?87?%;line-height:%?87?%}.channel .items .items_center .input[data-v-3839c102]{width:%?470?%;color:#666;font-size:%?30?%}.channel .items .items_remarks[data-v-3839c102]{width:calc(100% - %?60?%);margin:0 %?30?%;display:-webkit-box;display:-webkit-flex;display:flex}.channel .items .items_remarks .title[data-v-3839c102]{width:%?160?%;color:#333;margin:%?26?% 0 %?12?% 0;font-size:%?30?%;font-weight:700}.channel .items .items_remarks .input[data-v-3839c102]{width:%?460?%;border-radius:%?10?%;padding-top:%?26?%;padding-right:%?20?%;color:#666;font-size:%?30?%}.channel .active[data-v-3839c102]{background-color:#f0f0f0}.fixed_add[data-v-3839c102]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?88?%;background:-webkit-linear-gradient(left,#2466ad,#2b7ed1);background:linear-gradient(90deg,#2466ad,#2b7ed1);position:fixed;bottom:0;width:100%}.fixed_add .iconfont[data-v-3839c102]{font-size:%?36?%;color:#fff;margin-right:%?12?%}.fixed_add .text[data-v-3839c102]{font-size:%?36?%;color:#fff}body.?%PAGE?%[data-v-3839c102]{background-color:#fafafa}',""]),e.exports=t},"40c5":function(e,t,i){"use strict";var n=i("ee27");i("a9e3"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=n(i("0d3a")),s=n(i("ce9c")),c={components:{pageHeadAdd:o.default,tipsShowModal:s.default},data:function(){return{channelList:[],postData:{company_id:"",type:"",name:"",nickname:""},timeremingdlist:[],projectdetailtmp:{},executorid:0,designerid:0,managerid:0,iscancancle:!1,isstatus:!1,ismanager:!1,userinfo:{},aashow:!1,deletetimeid:""}},onShow:function(){a.getTimeremingdlist()},onLoad:function(e){a=this,a.projectid=e.id,"project"==e.status&&a.$set(a,"isstatus",!0),a.getuser((function(e){console.log(e),a.userinfo=e.data,console.log(a.userinfo),console.log(a.projectid),a.getprojectdetail()}))},methods:{cancel:function(e){console.log(e)},confirm:function(e){console.log(e),a.post("api/project/delete_timer",{timer_id:a.deletetimeid},(function(e){if(console.log(e),1===e.code)a.echo("删除成功！"),uni.setStorage({key:"willUpdate",data:!0}),a.getTimeremingdlist(),uni.setStorage({key:"update_my",data:!0});else{var t=e.msg.split("(",2);a.echo(t[0])}}))},event:function(e){console.log(e)},getprojectdetail:function(){a.post("api/project/project_detail",{id:a.projectid},(function(e){if(1===e.code)a.projectdetailtmp=e.data,console.log(a.projectdetailtmp),a.projectdetailtmp.designer&&(a.designerid=a.projectdetailtmp.designer),a.projectdetailtmp.manager&&(a.managerid=a.projectdetailtmp.manager),a.projectdetailtmp.executor&&(a.executorid=a.projectdetailtmp.executor),a.checkPower(a.userinfo,"api/project/order_timer")?a.$set(a,"ismanager",!0):a.designerid==a.userinfo.id||a.managerid==a.userinfo.id?a.$set(a,"ismanager",!0):a.$set(a,"ismanager",!1),a.getiscanclefuc();else{var t=e.msg.split("(",2);a.echo(t[0])}}))},getiscanclefuc:function(){a.checkPower(a.userinfo,"api/project/order_timer")?a.iscancancle=!0:a.designerid==a.userinfo.id||a.managerid==a.userinfo.id?(console.log("我是设计师/项目经理"),a.iscancancle=!0):a.iscancancle=!1},getTimeremingdlist:function(){a.post("api/project/timer_list",{order_id:a.projectid},(function(e){if(1===e.code){console.log(e);var t=e.data;a.each(t,(function(e,t){Number(1e3*t.deadtime)<Number(Date.parse(new Date))?t.timeover=!1:t.timeover=!0,t.deadtimetext=a.formatDateTime(new Date(1e3*t.deadtime),"yyyy-MM-dd hh:mm"),t.remarks||(t.remarks="未填写")})),a.timeremingdlist=t,console.log(a.timeremingdlist)}else{var i=e.msg.split("(",2);a.echo(i[0])}}))},formatDateTime:function(e,t){if(!(e instanceof Date))return"";var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};if(/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(S+)/.test(t)){var n=e.getTime()+"";t=t.replace(RegExp.$1,n.substring(n.length-3))}for(var a in i)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return t=t.replace("NaN-aN-aN",""),t=t.replace("aN:aN",""),t},timestampToTime:function(e){var t=new Date(1e3*e),i=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",a=t.getDate()+" ",o=t.getHours()+":",s=t.getMinutes()+":",c=t.getSeconds();return i+n+a+o+s+c},toAddflow:function(){a.iscancancle&&uni.navigateTo({url:"/pages/my/userinfo/timeremind/addtimeremind/addtimeremind?projectid="+a.projectid})},deletefee:function(){a.iscancancle&&uni.navigateTo({url:"/pages/my/userinfo/timeremind/addtimeremind/addtimeremind?projectid="+a.projectid})},todeletetime:function(e){a.iscancancle&&(a.$set(a,"aashow",!0),a.deletetimeid=e)}}};t.default=c},4907:function(e,t,i){"use strict";i.r(t);var n=i("40c5"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},a4dd:function(e,t,i){"use strict";var n={pageHeadAdd:i("0d3a").default,tipsShowModal:i("ce9c").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("page-head-add",{attrs:{title:"时间提醒",addshow:e.ismanager},on:{back:function(t){arguments[0]=t=e.$handleEvent(t),e.backfee.apply(void 0,arguments)},send:function(t){arguments[0]=t=e.$handleEvent(t),e.deletefee.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"xpadding"}),0==e.timeremingdlist.length?i("v-uni-view",{staticClass:"xlistmargin"},[e._v("暂无时间提醒哦~")]):e._e(),i("v-uni-view",{staticClass:"channel"},e._l(e.timeremingdlist,(function(t,n){return e.timeremingdlist.length>0?i("v-uni-view",{key:n,class:["items",t.timeover?"":"active"]},[i("v-uni-view",{staticClass:"items_top"},[i("v-uni-view",{staticClass:"left_title"},[e._v("事"),i("v-uni-view",{staticClass:"www"}),e._v("件：")],1),i("v-uni-view",{staticClass:"right_input"},[i("v-uni-view",{staticClass:"input"},[e._v(e._s(t.event)),t.timeover?e._e():[e._v("（已过期）")]],2),e.ismanager?i("v-uni-view",{staticClass:"iconfont iconcuowu",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.todeletetime(t.id)}}}):e._e()],1)],1),i("v-uni-view",{staticClass:"items_center"},[i("v-uni-view",{staticClass:"title"},[e._v("截止时间：")]),i("v-uni-view",{staticClass:"input"},[e._v(e._s(t.deadtimetext))])],1),i("v-uni-view",{staticClass:"items_center"},[i("v-uni-view",{staticClass:"title"},[e._v("跟进人：")]),i("v-uni-view",{staticClass:"input"},[e._v(e._s(t.executor))])],1),i("v-uni-view",{staticClass:"items_remarks"},[i("v-uni-view",{staticClass:"title"},[e._v("备"),i("v-uni-view",{staticClass:"www"}),e._v("注：")],1),i("v-uni-view",{staticClass:"input"},[e._v(e._s(t.remarks))])],1),i("v-uni-view",{staticClass:"xpadding"})],1):e._e()})),1),i("v-uni-view",{},[i("tips-show-modal",{attrs:{title:"提示",text:"确定取消本次提醒吗？"},on:{cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)},event:function(t){arguments[0]=t=e.$handleEvent(t),e.event.apply(void 0,arguments)}},model:{value:e.aashow,callback:function(t){e.aashow=t},expression:"aashow"}})],1)],1)},o=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}))},ad88:function(e,t,i){var n=i("1fcf4");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("dec10f6a",n,!0,{sourceMap:!1,shadowMode:!1})}}]);